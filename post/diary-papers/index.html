<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Smy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="A student who is constantly striving"/>
<meta name="keywords" content="A student who is constantly striving"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://saseke.github.io/favicon.ico">

<link rel="stylesheet" href="https://saseke.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://saseke.github.io/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://saseke.github.io/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://saseke.github.io/images/avatar.png" alt="Smy"
                 class="img-responsive">
        </figure>
        <a href="https://saseke.github.io/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>Smy</h2>
        <p>A student who is constantly striving</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- 标签 -->
        <div class="fh5co-box">
            <a href="https://saseke.github.io/tags/"><h3 class="heading">👉标签</h3></a>
            <ul>
                
                    <li><a href="https://saseke.github.io/tag/ugAnwOalE/">paper</a></li>
                
                    <li><a href="https://saseke.github.io/tag/algorithm/">algorithm</a></li>
                
                    <li><a href="https://saseke.github.io/tag/diary/">diary</a></li>
                
                    <li><a href="https://saseke.github.io/tag/AwsgcjQkK/">c++</a></li>
                
                    <li><a href="https://saseke.github.io/tag/lbnI2Wnls/">distributed</a></li>
                
                    <li><a href="https://saseke.github.io/tag/tZS19L4dr/">file system</a></li>
                
                    <li><a href="https://saseke.github.io/tag/vT5ZzxYvS/">redis</a></li>
                
                    <li><a href="https://saseke.github.io/tag/JEV3JRwPx/">architecture</a></li>
                
                    <li><a href="https://saseke.github.io/tag/mgPa4qhSL/">storm</a></li>
                
                    <li><a href="https://saseke.github.io/tag/rVd9T6I6y/">hbase</a></li>
                
                    <li><a href="https://saseke.github.io/tag/RnNn2Kd83/">hive</a></li>
                
                    <li><a href="https://saseke.github.io/tag/eExHX0970/">leetcode</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        
                        >
                            HomePage
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        
                        >
                            Archive
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                        
                        >
                            Tag
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                        
                        >
                            About
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://saseke.github.io">Smy </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>👈 Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next 👉</span></a>-->

    <!-- 等gridea出自定义页面功能再优化一下 -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://saseke.github.io/post-images/diary-papers.jpg" alt="Diary papers" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
            </span>
            <h2 class="fh5co-article-title animate-box">Diary papers</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2022-06-20</li>
                <li>2645字</li>
                <li>10 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <h1 id="620">6.20</h1>
<h2 id="the-hadoop-distributed-file-system-论文相关知识">The Hadoop Distributed File System 论文相关知识</h2>
<h3 id="论文前置知识">论文前置知识</h3>
<ol>
<li>文件系统的Namespace是什么<br>
Namespace是文件系统目录的组织方式</li>
</ol>
<p><strong>Hadoop简述</strong><br>
Hadoop是Apache 开源的一个项目。Hadoop提供了一个分布式文件系统(HDFS)以及一个分布式计算框架(MapReduce)。Hadoop最大的特点就是：数据分散在许多机器上存储，多台机器并行计算。</p>
<p><strong>HDFS架构</strong><br>
HDFS主要由NameNodes,DataNodes，HDFS Client,Image,Journal,CheckpointNode,BackupNode,Upgrades,File System Snapshots.构成</p>
<p><strong>NameNode相关知识</strong></p>
<ol>
<li>HDFS的Namespace是由文件和目录构成的层次结构。HDFS中用inode表示File和Directories。<font color='red'>意思是除了文件和目录表示文件之外，还有其他存储文件的方式</font></li>
<li>inode中存储了文件权限，修改和访问时间，namespace,磁盘空间的分配等信息。</li>
<li>HDFS的文件数据内容被拆分成许多large blocks(通常是128 MB)。每一个文件块都可以单独配置副本数。</li>
<li>Namenode存储了namespace tree和 File Blocks与存储它的DataNodes的映射</li>
<li>HDFS Client 读取数据的过程
<ul>
<li>HDFS Client首先会向NameNode询问文件对应的数据块的位置</li>
<li>HDFS Cliet 从距离自己最近的DataNode读取数据</li>
</ul>
</li>
<li>HDFS Client 写入数据的过程
<ul>
<li>HDFS Client 请求NameNode，NameNode返回给合适的三个DataNodes给Client</li>
<li>HDFS Client 以流水线的方式将数据写入三个DataNodes中</li>
</ul>
</li>
<li>image概念<br>
inode数据和构成每一个文件的块列表集合共同组成了NameNode的元数据：Image</li>
<li>checkpoint概念<br>
将Image数据存储到文件系统中，进行持久化后的文件叫做checkpoint</li>
<li>journal概念<br>
对Image各种操作的log日志文件叫做:journal</li>
<li>namespace信息存储在RAM中</li>
</ol>
<h3 id="碰到的问题">碰到的问题</h3>
<ol>
<li>HDFS的文件块为什么设置的这么大
<ul>
<li>文件块大，对应的inode数据就少，文件的元数据就少</li>
<li>减少文件块的寻址时间</li>
</ul>
</li>
<li>Client写入数据，数据是在哪里进行分块的
<ul>
<li>个人猜测：是在以pipline写入数据的时候，DataNode做的分块处理</li>
</ul>
</li>
<li>Client以流水线的方式写入三个DataNodes中。假设一个文件被拆分成5个Block块，那么5块都是在一个DataNode上进行部署的吗？三个DataNodes存储的是相同的数据？</li>
<li>HDFS最初设计为啥只设计一个NameNode</li>
</ol>
<h1 id="621">6.21</h1>
<h2 id="the-hadoop-distributed-file-system-论文相关知识-2">The Hadoop Distributed File System 论文相关知识</h2>
<p><strong>DataNodes</strong></p>
<ol>
<li>DataNodes主要是由许多等大小的Blocks构成。每一个Block分成两部分，一部分是文件本身的数据，另外一部分是Block的元数据，比如：校验和,生成戳</li>
<li>DataNode在连接NameNode之后，会向NameNode执行一次<code>handshake</code>即握手。握手的目的是校验namespace ID和软件版本是否与NameNode对应。如果不对应，就停止DataNode</li>
<li>namespace ID:在文件系统格式化的时候，会重新分配。通过使用namespace ID来验证DataNode是否属于该集群中</li>
<li>当一个没有namespace ID的DataNode加入集群时候，会将当前集群的namespace ID 分配给它</li>
<li>除了分配namespace ID之外，DataNode还会自动生成一个storage ID来进行内部标示。这个ID标示可以有效的防止IP,PORT变换之后的识别</li>
<li>副本确认：DataNode每隔一个小时发送<code>block report</code>将自己拥有的块信息发送给NameNode。发送的信息包括: block id, 生成戳,每一个数据块的长度。</li>
<li>心跳机制：DataNode每三秒会向NameNode发送心跳报文。如果NameNode超过10分钟还没有收到DataNode的心跳，NameNode会将该DataNode存储的Block数据备份复制到别的机器上</li>
<li>metadata数据：DataNode发送心跳的时候，也会发送一些metadata数据。如：磁盘总容量，磁盘使用情况，当前数据传输进度等数据。NameNode拿到这些数据之后，方便进行决策</li>
<li>NameNode通过对心跳的回应，来为DataNode下发命令。命令包括：复制blocks到其他的nodes,删除本地的blocks,重新注册等命令。</li>
</ol>
<h3 id="碰到的问题-2">碰到的问题</h3>
<ol>
<li>namespace ID作用是什么？<br>
通过namespace ID来判断DataNode是否属于该集群</li>
<li>向DataNode写入数据，对文件的分块操作谁来做，怎么将文件写入对应block中去<br>
通过HDFS Client将数据分块，每一块都单独传输</li>
</ol>
<h1 id="627">6.27</h1>
<h2 id="the-hadoop-distributed-file-system-论文相关知识-3">The Hadoop Distributed File System 论文相关知识</h2>
<h3 id="hdfs-client">HDFS Client</h3>
<p>HDFS Client主要就是用来与用户做交互使用的。</p>
<h1 id="628">6.28</h1>
<h2 id="the-hadoop-distributed-file-system-论文相关知识-4">The Hadoop Distributed File System 论文相关知识</h2>
<h3 id="hdfs-client-2">HDFS Client</h3>
<p><strong>HDFS Client读取数据</strong></p>
<ol>
<li>询问Namenode，获取到文件块存放的DataNodes</li>
<li>直接请求对应的DataNodes，获取数据</li>
</ol>
<p><strong>HDFS Client写入数据</strong><br>
流程就是：写完一个块，再写另外一个块</p>
<ol>
<li>HDFS Client询问Namenode获取一个适合存放文件的DataNode</li>
<li>HDFS Client使用pipline建立与DataNode的数据通信，进行块数据传输</li>
<li>传输完第一个块之后，HDFS Client再向Namenode请求下一个块适合存放的DataNode位置 ...</li>
</ol>
<h3 id="image-and-journal">Image and Journal</h3>
<h4 id="checkpoint">checkpoint</h4>
<p><strong>checkpoint是什么</strong><br>
将HDFS的image持久化的文件数据叫做checkpoint</p>
<p><strong>特点</strong></p>
<ol>
<li>checkpoint数据不会被NameNode进行修改</li>
<li>checkpoint的更新是在下一次NameNode重启的时候</li>
</ol>
<p><strong>checkpoint更新规则</strong></p>
<ol>
<li>在NameNode重启之后，读取checkpoint数据，形成新的checkpoint</li>
<li>将新的checkpoint和空的journal写回磁盘</li>
</ol>
<h3 id="遇到的问题">遇到的问题</h3>
<ol>
<li>为什么将每一个文件块的副本设置为3?</li>
</ol>
<h3 id="点子">点子</h3>
<ol>
<li>对于那些重要的或者经常访问的，Block 副本数目可以增加,提高容错率</li>
<li>可以在HDFS Client端做一下块位置缓存，方便下次读取相同位置的数据，就不需要再次访问Namenode,减轻Namenode的压力</li>
</ol>
<h1 id="629">6.29</h1>
<h2 id="the-hadoop-distributed-file-system-论文相关知识-5">The Hadoop Distributed File System 论文相关知识</h2>
<h3 id="checkpointnode">CheckpointNode</h3>
<p><strong>CheckpointNode本质</strong><br>
本质就是NameNode,NameNode除了处理Client的请求之外，还可以扮演CheckpointNode和BackupNode两个角色。<br>
<strong>CheckpointNode职责</strong><br>
Checkpoint负责从Namenode上拉取Checkpoint和Journal信息，然后将Checkpoint和Journal合并成一个新的Checkpoint，和空的Journal文件同步返回给NameNode。</p>
<p><strong>为什么设置CheckpointNode</strong><br>
防止Journal日志过大，对系统运行产生影响</p>
<h3 id="backupnode">BackupNode</h3>
<p><strong>BackupNode本质</strong><br>
是一个NameNode的副本，而且所有的数据全都存储在BackupNode的内存中</p>
<!-- File IO Operation And Replica management -->
<h3 id="file-read-and-write">File Read and Write</h3>
<p><strong>文件最重要的两个特点</strong></p>
<ol>
<li>数据一旦写入，就不可以更新和删除，只能进行追加数据</li>
<li>HDFS是采用单线程写入，多线程读的线程模型</li>
</ol>
<p><strong>多个线程同时写入一个文件，HDFS执行流程</strong></p>
<ol>
<li>写文件的Client会周期性的向Namenode发送心跳，进行续租。</li>
<li>租约有soft limti和hard limit,在soft limit期间，该文件只能由该Client进行写入，其他线程进不去。如果超出了soft limit但是没有超出hard limit,那么其他线程可以抢写入该文件的机会。在超过hard limit时间之后，那么HDFS会主动关闭该文件，认为没有线程写入该文件。</li>
</ol>
<p><strong>HDFS写入数据的流程</strong></p>
<ol>
<li>请求NameNode分配对应的Block</li>
<li>NameNode选择合适的DataNodes存储Block副本</li>
<li>多个DataNodes之间构成一个pipline,进行数据传输</li>
</ol>
<p><strong>数据一致性</strong><br>
HDFS的文件数据是在写入完成整个文件之后，才对其他Reader可见。在写入的过程中是不可见的。如果想要在写入的过程中，写入的内容对其他Reader可见，就可以使用<code>hflush</code>操作进行数据一致性。</p>
<h3 id="遇到的问题-2">遇到的问题</h3>
<ol>
<li>多线程条件下，多个Client提交事物，为什么在sync-flush阶段，变成顺序执行了<br>
因为多个线程最后存储的是同一个journal文件。文件肯定不支持并发写操作</li>
<li>HDFS为什么设计成数据只能追加？<br>
创建新文件，比更新旧文件速度快</li>
</ol>
<h1 id="630">6.30</h1>
<p><strong>HDFS Client读取block流程</strong></p>
<ol>
<li>HDFS Client会请求NameNode获取所有的块信息，以及对应块的副本位置</li>
<li>对于每一块数据，HDFS Client会把副本机器距离当前机器的距离进行排序，优先选择距离近的节点进行下载数据</li>
</ol>
<h1 id="74">7.4</h1>
<h3 id="block-placement">Block Placement</h3>
<p>确定数据块备份存放的节点位置。</p>
<ol>
<li>存放Block数据的节点存放在机架上面，每一个机架的节点共享一个交换机。机架与机架之前通过交换机进行连接。<br>
<img src="https://saseke.github.io/post-images/1656942388065.png" alt="" loading="lazy"></li>
<li>HDFS通过节点与节点之间的距离来计算网络带宽。两个节点的距离可以通过找到它们公共祖先来计算获得。</li>
<li>在DataNode向NameNode注册的时候，NameNode需要标识该DataNode属于哪个机架。</li>
</ol>
<p><strong>HDFS块放置策略</strong></p>
<ol>
<li>HDFS会将第一个副本放置在写请求方所在的DataNode。(Client第一个请求的DataNode)</li>
<li>HDFS将第二个，第三个放在另外一个机架上，但是不是相同的DataNode</li>
<li>剩下的副本存放在其他任意的节点上，但是要求每个机架最多有一个副本</li>
<li>如果数据的副本数目&lt;机架数目的2倍，可以要求每个机架最多有两个该数据的副本</li>
<li>在确定块的放置位置之后，DataNode会按照距离第一个DataNode的距离构成链状结构，构建pipline。进行数据传输</li>
</ol>
<p><strong>HDFS读取块数据</strong></p>
<ol>
<li>NameNode会根据Client选择的DataNode，拿到对应的Block存放的位置返还给Client端。</li>
</ol>
<h3 id="replication-management">Replication management</h3>
<p>提供对数据块副本数目的控制</p>
<ol>
<li>NameNode会监控每个Block的副本数目。</li>
<li>如果超过了约定的副本数目，NameNode会选择一个使用磁盘空间最多的那个DataNode，将Block数据删除掉。</li>
<li>如果少于约定的副本数目，NameNode会将创建副本任务放入优先级队列中。只有一个Block副本的优先级最高，副本越多，优先级越低。通过一个后台线程去获取优先级队列的第一个任务，去创建对应的块的副本。</li>
<li>NameNode也必须保证Block的所有副本不能全在一个node上。由于Block在其他机架上备份的数目少于要求的数目，因此会触发备份。当备份创建完成之后，Block的备份数目会大于要求的数目，从而需要进行旧备份的删除操作。</li>
</ol>
<h3 id="遇到的问题-3">遇到的问题</h3>
<ol>
<li>hflush看不懂呀<br>
hflush用来实现数据一致性的</li>
</ol>
<h3 id="点子-2">点子</h3>
<p>如果Block的副本很多的情况，还使用这种线性的pipline技术，很显然就很慢了。可以引入图的技术，进一步加快数据同步。</p>
<h2 id="hdfs局限性">HDFS局限性</h2>
<ol>
<li>HDFS不支持随机读写，文件一旦写入，不能改变，只能在原来的基础上进行追加操作</li>
</ol>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">下一篇</div>
                                <a href="https://saseke.github.io/post/distributed-file-system-design-diary/">
                                    <h3 class="post-title">
                                        Daily distributed file system design
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- 返回顶部 -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li><a href="#620">6.20</a>
<ul>
<li><a href="#the-hadoop-distributed-file-system-%E8%AE%BA%E6%96%87%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86">The Hadoop Distributed File System 论文相关知识</a>
<ul>
<li><a href="#%E8%AE%BA%E6%96%87%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86">论文前置知识</a></li>
<li><a href="#%E7%A2%B0%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">碰到的问题</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#621">6.21</a>
<ul>
<li><a href="#the-hadoop-distributed-file-system-%E8%AE%BA%E6%96%87%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-2">The Hadoop Distributed File System 论文相关知识</a>
<ul>
<li><a href="#%E7%A2%B0%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-2">碰到的问题</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#627">6.27</a>
<ul>
<li><a href="#the-hadoop-distributed-file-system-%E8%AE%BA%E6%96%87%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-3">The Hadoop Distributed File System 论文相关知识</a>
<ul>
<li><a href="#hdfs-client">HDFS Client</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#628">6.28</a>
<ul>
<li><a href="#the-hadoop-distributed-file-system-%E8%AE%BA%E6%96%87%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-4">The Hadoop Distributed File System 论文相关知识</a>
<ul>
<li><a href="#hdfs-client-2">HDFS Client</a></li>
<li><a href="#image-and-journal">Image and Journal</a>
<ul>
<li><a href="#checkpoint">checkpoint</a></li>
</ul>
</li>
<li><a href="#%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">遇到的问题</a></li>
<li><a href="#%E7%82%B9%E5%AD%90">点子</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#629">6.29</a>
<ul>
<li><a href="#the-hadoop-distributed-file-system-%E8%AE%BA%E6%96%87%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86-5">The Hadoop Distributed File System 论文相关知识</a>
<ul>
<li><a href="#checkpointnode">CheckpointNode</a></li>
<li><a href="#backupnode">BackupNode</a></li>
<li><a href="#file-read-and-write">File Read and Write</a></li>
<li><a href="#%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-2">遇到的问题</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#630">6.30</a></li>
<li><a href="#74">7.4</a><br>
*
<ul>
<li><a href="#block-placement">Block Placement</a></li>
<li><a href="#replication-management">Replication management</a></li>
<li><a href="#%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-3">遇到的问题</a></li>
<li><a href="#%E7%82%B9%E5%AD%90-2">点子</a></li>
<li><a href="#hdfs%E5%B1%80%E9%99%90%E6%80%A7">HDFS局限性</a></li>
</ul>
</li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://saseke.github.io/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://saseke.github.io/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://saseke.github.io/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://saseke.github.io/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://saseke.github.io/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://saseke.github.io/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://saseke.github.io/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // 代码高亮
    hljs.initHighlightingOnLoad();

    // img 懒加载
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // 懒加载动画
            threshold: 180  // 在图片距离屏幕180px时提前载入
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // 目录
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
</script>




</body>
</html>
